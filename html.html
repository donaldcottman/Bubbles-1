<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bubbles: Stonks</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>
<body>
    <h1 style="text-align: center; margin-top: 60px;">Bubbles: Stonks</h1>

    <div class="form-select" style="/* width:200px; */margin-left: auto;margin-right: auto;margin-top: 50px;text-align: center;">
        <select id="stockDeltaPTimespan">
            <option value="5">5 minutes</option>
            <option value="10">10 minutes</option>
            <option value="25">25 minutes</option>
            <option value="40">40 minutes</option>
            <option value="60">60 minutes</option>
        </select>
    </div>

    <button type="button" class="btn btn-success" style="margin-top: 50px; margin-left: auto; margin-right: auto; display: block;" onclick="sendData()">Get Stonks</button>

    <div id="result" style="text-align: center; margin-top: 35px; width: 600px; margin-left: auto; margin-right: auto;">JSON stonks will appear here after 10-30 minutes: </div>

    <script>
        function sendData() {
            var selectElement = document.getElementById("stockDeltaPTimespan");
            var selectedOption = selectElement.options[selectElement.selectedIndex].value;
            console.log(selectedOption);
            
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://127.0.0.1:5000/bubbles_script");
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(JSON.stringify({ "stockDeltaPTimespan": selectedOption }));
            xhr.onload = function() {
                document.getElementById("result").innerHTML += this.responseText;
            };
        }
    </script>

</body>
</html>